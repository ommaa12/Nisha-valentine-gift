<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Be My Valentine?</title>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* === ORIGINAL STYLES === */
        * { box-sizing: border-box; }
        
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100vw;
            background-color: #fce4ec;
            font-family: 'Poppins', sans-serif;
            overflow: hidden;
        }

        .floating-container {
            position: fixed;
            width: 160px;
            height: 160px;
            top: -300px; left: -300px;
            z-index: 20;
            pointer-events: none;
            transition: all 3.5s ease-in-out;
            opacity: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .show-container { opacity: 1; }

        .main-couple-pic {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 5px solid white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            object-fit: cover;
            position: relative;
            z-index: 2;
        }

        .mini-rose {
            position: absolute;
            font-size: 24px;
            z-index: 1;
            top: 50%; left: 50%;
            margin-top: -12px; margin-left: -12px;
            transform-origin: 85px center;
            animation: orbit 8s infinite linear;
        }

        .r1 { animation-delay: 0s; animation-duration: 7s; }
        .r2 { animation-delay: -1.3s; animation-duration: 8s; transform-origin: 90px center; }
        .r3 { animation-delay: -2.6s; animation-duration: 6s; }
        .r4 { animation-delay: -3.9s; animation-duration: 7.5s; transform-origin: 80px center;}
        .r5 { animation-delay: -5.2s; animation-duration: 9s; }
        .r6 { animation-delay: -6.5s; animation-duration: 6.5s; }

        @keyframes orbit {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .confetti {
            position: fixed;
            top: -50px;
            z-index: 999;
            font-size: 24px;
            pointer-events: none;
            animation: fall linear forwards;
        }
        @keyframes fall {
            to { transform: translateY(110vh) rotate(720deg); }
        }

        #timer-box {
            background: #fff0f3;
            padding: 10px 15px;
            border-radius: 15px;
            margin-top: 15px;
            border: 2px dashed #ff4081;
            animation: popIn 0.5s ease-out;
            width: 100%;
        }
        
        @keyframes popIn {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .timer-title { font-size: 0.85rem; font-weight: 600; color: #880e4f; margin-bottom: 5px; }
        .timer-time { font-size: 1rem; color: #e91e63; font-weight: bold; font-family: monospace; }

        .card {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px; 
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            text-align: center;
            width: 90%;
            max-width: 400px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            transition: transform 0.3s ease;
            overflow-y: auto;
        }

        @media (max-height: 700px) {
            .card { padding: 20px; transform: scale(0.9); }
            h1 { font-size: 2rem !important; }
            .result-img { max-height: 150px; }
        }

        h1 {
            font-family: 'Pacifico', cursive;
            color: #e91e63;
            font-size: 2.2rem;
            margin-bottom: 10px;
            line-height: 1.2;
        }

        p { color: #555; margin-bottom: 15px; font-size: 1rem; }

        .btn-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            align-items: center;
            margin-top: 15px;
            width: 100%;
        }

        .btn-yes {
            background: linear-gradient(45deg, #ff4081, #f50057);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(233, 30, 99, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: 600;
            width: 100%;
            z-index: 10;
        }

        .btn-yes:hover { transform: scale(1.05); }

        .btn-no {
            background: #e0e0e0;
            color: #757575;
            border: none;
            padding: 10px 20px;
            font-size: 1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.2s ease-out;
            z-index: 100;
        }

        #start-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 192, 203, 0.95);
            z-index: 1000;
            display: flex; justify-content: center; align-items: center; flex-direction: column;
            cursor: pointer;
        }
        .start-btn {
            font-size: 1.8rem; background: white; padding: 15px 30px;
            border-radius: 50px; color: #e91e63; font-family: 'Pacifico', cursive;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1); animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .hidden { display: none !important; }
        
        .result-img {
            width: 100%; 
            border-radius: 15px; 
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            max-height: 200px;
            object-fit: cover;
        }

        .persistence-msg {
            color: #e91e63; font-size: 0.8rem; margin-top: 15px; font-weight: 600;
            opacity: 0; transition: opacity 0.5s;
        }
        
        .visible { opacity: 1 !important; }

        .bg-heart {
            position: absolute; color: #f48fb1; opacity: 0.5;
            animation: float-hearts 6s infinite ease-in-out; z-index: -1;
        }
        @keyframes float-hearts {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(10deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }

        /* === NEW FEATURE STYLES (MODALS) === */
        .gift-btn {
            background: #ad1457;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            width: 100%;
            font-weight: 600;
            margin-top: 5px;
            transition: 0.3s;
        }
        .gift-btn:hover { background: #d81b60; transform: scale(1.02); }

        .gift-overlay {
            position: fixed; top:0; left:0; width:100%; height:100%;
            background: rgba(255, 255, 255, 0.98); z-index: 2000; display:none;
            flex-direction: column; align-items: center; justify-content: center;
            padding: 30px; text-align: center;
        }

        .mcq-box { width: 100%; max-width: 350px; }
        .mcq-option {
            width: 100%; padding: 12px; margin: 8px 0;
            border: 2px solid #e91e63; border-radius: 15px;
            background: white; color: #e91e63; font-weight: 600;
            cursor: pointer; transition: 0.2s;
        }
        .mcq-option:hover { background: #fce4ec; }

        .letter-box { font-family: 'Pacifico', cursive; color: #e91e63; font-size: 1.3rem; line-height: 1.5; }
        video { width: 100%; max-width: 400px; border-radius: 15px; border: 4px solid #fff; }
        .close-btn { margin-top: 20px; padding: 10px 25px; background: #333; color: white; border: none; border-radius: 50px; cursor: pointer; }
    </style>
</head>
<body>

    <audio id="bg-music" loop>
        <source src="music.mp3" type="audio/mpeg">
    </audio>

    <div id="start-overlay" onclick="startExperience()">
        <div class="start-btn">Click to Open üíå</div>
        <p style="margin-top: 10px; color: #e91e63;">(Sound on üîä)</p>
    </div>

    <div id="floating-container" class="floating-container">
        <img src="couple.jpg" alt="Us" class="main-couple-pic">
        <div class="mini-rose r1">üåπ</div>
        <div class="mini-rose r2">üåπ</div>
        <div class="mini-rose r3">üåπ</div>
        <div class="mini-rose r4">üåπ</div>
        <div class="mini-rose r5">üåπ</div>
        <div class="mini-rose r6">üåπ</div>
    </div>
    
    <div class="bg-heart" style="top: 10%; left: 10%; font-size: 2rem;">üíñ</div>
    <div class="bg-heart" style="top: 20%; right: 40%; font-size: 1.5rem;">üíò</div>
    <div class="bg-heart" style="bottom: 15%; left: 20%; font-size: 1.8rem;">üíï</div>
    <div class="bg-heart" style="bottom: 10%; right: 30%; font-size: 2.2rem;">üíó</div>

    <div class="card hidden" id="main-card">
        <div id="question-screen">
            <h1>Will you be my valentine? üíò</h1>
            <p>Choose wisely... ü§®</p>
            <div class="btn-container">
                <button class="btn-yes" onclick="showResult()">YES! üíò</button>
                <button class="btn-no" id="noBtn" onmouseover="moveButton()" onclick="moveButton()" ontouchstart="moveButton()">NO</button>
            </div>
            <p id="persist-text" class="persistence-msg">You're persistent! But the answer is YES! üòâ</p>
        </div>

        <div id="result-screen" class="hidden">
            <h1>I knew it! üéâ</h1>
            <img src="crazy-dance-dance.gif" alt="Celebration" class="result-img">
            
            <h2 style="color: #e91e63; font-size: 1.1rem; line-height: 1.4;">Congratulations! You are officially <span id="partner-name">Om's</span> Valentine! ‚ù§Ô∏è</h2>
            
            <div id="timer-box">
                <div class="timer-title">Time we've been together(From 11/07/2024):</div>
                <div class="timer-time" id="time-together">Calculating...</div>
            </div>
            
            <div class="btn-container">
                <button class="gift-btn" onclick="startGiftQuiz()">üéÅ Gift_1</button>
                <button class="gift-btn" onclick="openGift('letter-overlay')">üíå Gift_2</button>
                <button class="gift-btn" onclick="openVideo()">üé¨ Finally</button>
            </div>

            <p class="subtitle" style="margin-top: 10px; font-size: 0.8rem;">(I mean, we both knew you'd say yes eventually üòâ)</p>
        </div>
    </div>

    <div id="quiz-overlay" class="gift-overlay">
        <div id="quiz-container" class="mcq-box">
            <h2 id="quiz-question" style="color:#e91e63;">Question...</h2>
            <div id="quiz-options"></div>
        </div>
        <button class="close-btn" onclick="closeOverlays()">Cancel</button>
    </div>

    <div id="letter-overlay" class="gift-overlay">
        <div class="letter-box">
            <h2>To my dearest Wife...</h2>
            <p>You make my world brighter every single day. I am so lucky to have you by my side. I love you more than words can say! ‚ù§Ô∏è</p>
        </div>
        <button class="close-btn" onclick="closeOverlays()">Close</button>
    </div>

    <div id="video-overlay" class="gift-overlay">
        <video id="pVideo" controls>
            <source src="personal-video.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <button class="close-btn" onclick="closeOverlays()">Go Back</button>
    </div>

    <script>
        // === ORIGINAL LOGIC ===
        function startExperience() {
            var music = document.getElementById("bg-music");
            music.volume = 0.5; 
            music.play().then(() => {
                document.getElementById('start-overlay').style.display = 'none';
                document.getElementById('main-card').classList.remove('hidden');
                startFloatingLoop();
            }).catch(() => {
                document.getElementById('start-overlay').style.display = 'none';
                document.getElementById('main-card').classList.remove('hidden');
                startFloatingLoop();
            });
        }

        function showResult() {
            document.getElementById('question-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            startTimer();
            launchConfetti();
        }

        function moveButton() {
            const noBtn = document.getElementById('noBtn');
            const persistText = document.getElementById('persist-text');
            const padding = 50;
            const maxX = window.innerWidth - noBtn.offsetWidth - padding;
            const maxY = window.innerHeight - noBtn.offsetHeight - padding;
            const randomX = Math.max(padding, Math.floor(Math.random() * maxX));
            const randomY = Math.max(padding, Math.floor(Math.random() * maxY));
            noBtn.style.position = 'fixed'; noBtn.style.left = randomX + 'px'; noBtn.style.top = randomY + 'px';
            persistText.classList.add('visible');
        }

        function startFloatingLoop() {
            const container = document.getElementById('floating-container');
            container.classList.add('show-container');
            moveContainerRandomly(container);
            setInterval(() => { moveContainerRandomly(container); }, 3500); 
        }

        function moveContainerRandomly(element) {
            const x = Math.random() * (window.innerWidth - 180);
            const y = Math.random() * (window.innerHeight - 180);
            element.style.left = x + 'px'; element.style.top = y + 'px';
        }

        function startTimer() {
            const startDate = new Date("2024-07-11T00:00:00"); 
            const display = document.getElementById('time-together');
            setInterval(() => {
                const now = new Date(); const diff = now - startDate;
                const days = Math.floor(diff / 86400000);
                const hours = Math.floor((diff / 3600000) % 24);
                const minutes = Math.floor((diff / 60000) % 60);
                const seconds = Math.floor((diff / 1000) % 60);
                display.innerText = `${days}d ${hours}h ${minutes}m ${seconds}s`;
            }, 1000);
        }

        function launchConfetti() {
            const emojis = ['‚ù§Ô∏è', 'üåπ', 'üéâ', 'ü•Ç', 'üíò', 'üòç'];
            for (let i = 0; i < 60; i++) {
                const confetti = document.createElement('div');
                confetti.innerText = emojis[Math.floor(Math.random() * emojis.length)];
                confetti.classList.add('confetti');
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.animationDuration = (Math.random() * 3 + 2) + 's'; 
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 5000);
            }
        }

        // === NEW MCQ & GIFT LOGIC ===
        let currentStep = 0;
        const quizData = [
            { q: "Where do I plan to spend the rest of my life?", options: ["Goa", "Giridih", "Your heart"], correct: "Your heart" },
            { q: "Who gets more angry in our relationship?", options: ["You", "me", "both"], correct: "me" },
            { q: "Where did we meet the first time?", options: ["Mars", "Jupiter", "Deogarh"], correct: "Deogarh" }
        ];

        function startGiftQuiz() {
            currentStep = 0;
            document.getElementById('quiz-overlay').style.display = 'flex';
            loadQuestion();
        }

        function loadQuestion() {
            const data = quizData[currentStep];
            document.getElementById('quiz-question').innerText = data.q;
            const optionsDiv = document.getElementById('quiz-options');
            optionsDiv.innerHTML = "";
            data.options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = "mcq-option";
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(opt);
                optionsDiv.appendChild(btn);
            });
        }

        function checkAnswer(selected) {
            if(selected === quizData[currentStep].correct) {
                currentStep++;
                if(currentStep < quizData.length) {
                    loadQuestion();
                } else {
                    document.getElementById('quiz-container').innerHTML = `<h2 style="color:#e91e63;">Perfect! ‚ù§Ô∏è</h2><p>You know us so well! You are the best wife ever.</p>`;
                }
            } else {
                alert("Wrong answer! Try again, my love! üòò");
            }
        }

        function openGift(id) { document.getElementById(id).style.display = 'flex'; }

        function openVideo() {
            document.getElementById('video-overlay').style.display = 'flex';
            document.getElementById("bg-music").pause();
        }

        function closeOverlays() {
            document.querySelectorAll('.gift-overlay').forEach(el => el.style.display = 'none');
            document.getElementById('pVideo').pause();
            document.getElementById("bg-music").play();
        }
    </script>
</body>
</html>